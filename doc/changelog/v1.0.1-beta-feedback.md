# v1.0.1 ãƒ™ãƒ¼ã‚¿ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å¯¾å¿œ

**å¯¾å¿œæ—¥**: 2026-01-15 ã€œ 2026-01-19
**å¯¾å¿œè€…**: Claude Code

## æ¦‚è¦

TestFlighté…ä¿¡å¾Œã®ãƒ™ãƒ¼ã‚¿ãƒ†ã‚¹ã‚¿ãƒ¼ã‹ã‚‰ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã«åŸºã¥ãã€UIã®æ”¹å–„ã‚’å®Ÿæ–½ã—ã¾ã—ãŸã€‚

---

## ä¿®æ­£å†…å®¹

### 1. WordPopupãƒ¢ãƒ¼ãƒ€ãƒ«ã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³é€éå•é¡Œ

**å ±å‘Šå†…å®¹**: ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ç”»é¢ã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³ãŒé€ã‘ã¦ã„ã‚‹

**åŸå› **ï¼š

1. ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ãŒ`position: 'absolute'`ã§é…ç½®ã•ã‚Œã¦ã„ãŸãŒã€`bottom: Spacing.xl`ã§éš™é–“ãŒã‚ã£ãŸ
2. ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³ã®`outline`ãƒãƒªã‚¢ãƒ³ãƒˆã®`backgroundColor`ãŒ`'transparent'`ï¼ˆé€æ˜ï¼‰ã ã£ãŸ
3. iOSã®ã‚»ãƒ¼ãƒ•ã‚¨ãƒªã‚¢ï¼ˆãƒ›ãƒ¼ãƒ ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ï¼‰ãŒæœªè€ƒæ…®ã ã£ãŸ

**ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«**ï¼š

- `src/components/WordPopup/WordPopupModal.tsx`
- `src/components/common/Button.tsx`

**ä¿®æ­£å†…å®¹**ï¼š

**WordPopupModal.tsx** - ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¨ãƒªã‚¢ã®ã‚¹ã‚¿ã‚¤ãƒ«ä¿®æ­£ï¼š
```typescript
// useSafeAreaInsetsã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import { useSafeAreaInsets } from 'react-native-safe-area-context';

// ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§ã‚»ãƒ¼ãƒ•ã‚¨ãƒªã‚¢ã‚’å–å¾—
const insets = useSafeAreaInsets();

// å‹•çš„ã«paddingBottomã‚’è¨­å®š
<View style={[styles.actions, { paddingBottom: Math.max(insets.bottom, Spacing.lg) }]}>

// ã‚¹ã‚¿ã‚¤ãƒ«ä¿®æ­£
actions: {
  flexDirection: 'row',
  paddingHorizontal: Spacing.xl,
  paddingTop: Spacing.lg,
  gap: Spacing.md,
  position: 'absolute',
  bottom: 0,  // Spacing.xl ã‹ã‚‰ 0 ã«å¤‰æ›´
  left: 0,
  right: 0,
  backgroundColor: Colors.background,
  borderTopWidth: 1,  // è¿½åŠ 
  borderTopColor: Colors.divider,  // è¿½åŠ 
},

scrollContentContainer: {
  paddingBottom: 140,  // 100 ã‹ã‚‰ 140 ã«å¢—åŠ 
},
```

2. **Button.tsx** - outlineãƒãƒªã‚¢ãƒ³ãƒˆã®èƒŒæ™¯è‰²ä¿®æ­£:
```typescript
outline: {
  backgroundColor: Colors.background,  // 'transparent' ã‹ã‚‰å¤‰æ›´
  borderWidth: 1,
  borderColor: Colors.primary,
},
```

---

### 2. ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ç”»é¢ã®Yahoo! APIè¡¨ç¤ºãŒç¸¦æ›¸ãã«ãªã‚‹å•é¡Œ

**å ±å‘Šå†…å®¹**: Yahooã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹è¡¨ç¤ºãŒç¸¦æ›¸ãã«ãªã£ã¦ã„ã‚‹

**åŸå› **ï¼š `licenseHeader`ã‚¹ã‚¿ã‚¤ãƒ«ã§`flexDirection: 'row'`ã‚’ä½¿ç”¨ã—ã¦ã„ãŸã€‚`licenseName`ãŒ`flex: 1`ã§å¹…ã‚’å–ã£ã¦ã„ãŸãŸã‚ã€é•·ã„ãƒ†ã‚­ã‚¹ãƒˆãŒç¸¦ã«æŠ˜ã‚Šè¿”ã•ã‚Œã¦ã„ãŸã€‚

**ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«**: `src/screens/LicenseScreen.tsx`

**ä¿®æ­£å†…å®¹**:
```typescript
licenseHeader: {
  flexDirection: 'column',  // 'row' ã‹ã‚‰å¤‰æ›´
  marginBottom: Spacing.xs,
  gap: Spacing.xs,
},
licenseName: {
  fontSize: FontSizes.md,
  fontWeight: '600',
  color: Colors.text,
  // flex: 1 ã‚’å‰Šé™¤
},
licenseType: {
  // ... æ—¢å­˜ã®ã‚¹ã‚¿ã‚¤ãƒ«
  alignSelf: 'flex-start',  // è¿½åŠ ï¼ˆãƒãƒƒã‚¸ã‚’å·¦å¯„ã›ï¼‰
},
```

---

### 3. ã‚¿ãƒ–ãƒãƒ¼ã®ãƒ©ãƒ™ãƒ«å‰Šé™¤

**å ±å‘Šå†…å®¹**: ãƒ•ãƒƒã‚¿ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚¢ã‚¤ã‚³ãƒ³ä¸‹ã®æ–‡å­—ã¯ã„ã‚‰ãªã„ã‹ã‚‚

**ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«**: `src/navigation/AppNavigator.tsx`

**ä¿®æ­£å†…å®¹**:
- ã‚¿ãƒ–ãƒãƒ¼ã®ãƒ©ãƒ™ãƒ«ï¼ˆã€Œãƒ›ãƒ¼ãƒ ã€ã€Œå˜èªå¸³ã€ã€Œé€²æ—ã€ã€Œè¨­å®šã€ï¼‰ã‚’å‰Šé™¤
- ã‚¢ã‚¤ã‚³ãƒ³ã®ã¿ã®è¡¨ç¤ºã«å¤‰æ›´
- ä¸è¦ã«ãªã£ãŸ`Text`ã€`FontSizes`ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¨`tabLabel`ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å‰Šé™¤
- `accessibilityLabel`ã¯ãã®ã¾ã¾æ®‹ã—ã€ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼ã§ã®ã‚¿ãƒ–åèª­ã¿ä¸Šã’ã¯ç¶­æŒ

---

### 4. TOPã¸æˆ»ã‚‹ãƒœã‚¿ãƒ³ã®å®Ÿè£…

**å ±å‘Šå†…å®¹**: TOPã¸æˆ»ã‚‹ãƒœã‚¿ãƒ³ã‚’å®Ÿè£…ã—ã¦æ¬²ã—ã„

**ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«**: `src/screens/HomeScreen.tsx`

**å®Ÿè£…å†…å®¹**:
- 500pxä»¥ä¸Šã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã™ã‚‹ã¨å³ä¸‹ã«ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
- ä¸ŠçŸ¢å°ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆArrowUpï¼‰ã‚’ä½¿ç”¨
- ã‚¿ãƒƒãƒ—ã§ãƒ•ã‚£ãƒ¼ãƒ‰ã®å…ˆé ­ã«ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
- ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³/ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ã
- ãƒ—ãƒ©ã‚¤ãƒãƒªã‚«ãƒ©ãƒ¼ï¼ˆé’ï¼‰ã®ä¸¸ã„ãƒœã‚¿ãƒ³ï¼ˆ48x48pxï¼‰
- ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ©ãƒ™ãƒ«è¨­å®šæ¸ˆã¿

**è¿½åŠ ã‚³ãƒ¼ãƒ‰**:
```typescript
// State
const flatListRef = useRef<FlatList<TimelinePost>>(null);
const [showScrollToTop, setShowScrollToTop] = useState(false);
const scrollToTopOpacity = useRef(new Animated.Value(0)).current;
const SCROLL_THRESHOLD = 500;

// Handler
const handleScroll = useCallback(
  (event: NativeSyntheticEvent<NativeScrollEvent>) => {
    const offsetY = event.nativeEvent.contentOffset.y;
    const shouldShow = offsetY > SCROLL_THRESHOLD;
    // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†...
  },
  [showScrollToTop, scrollToTopOpacity, SCROLL_THRESHOLD]
);

const scrollToTop = useCallback(() => {
  flatListRef.current?.scrollToOffset({ offset: 0, animated: true });
}, []);
```

**ã‚¹ã‚¿ã‚¤ãƒ«**:
```typescript
scrollToTopButton: {
  position: 'absolute',
  bottom: Spacing.xl,
  right: Spacing.lg,
  ...Shadows.md,
},
scrollToTopPressable: {
  width: 48,
  height: 48,
  borderRadius: 24,
  backgroundColor: Colors.primary,
  justifyContent: 'center',
  alignItems: 'center',
},
```

---

### 5. å¤šè¨€èªå¯¾å¿œï¼ˆi18nï¼‰ã®å®Ÿè£…

**å ±å‘Šå†…å®¹**: å›½éš›åŒ–å¯¾å¿œã‚’å®Ÿæ–½

**å®Ÿè£…å†…å®¹**:

- `i18next`ã¨`react-i18next`ã‚’ä½¿ç”¨ã—ãŸå¤šè¨€èªå¯¾å¿œåŸºç›¤ã‚’æ§‹ç¯‰
- æ—¥æœ¬èªï¼ˆjaï¼‰ã¨è‹±èªï¼ˆenï¼‰ã®2è¨€èªã‚’ã‚µãƒãƒ¼ãƒˆ
- ãƒ‡ãƒã‚¤ã‚¹ã®è¨€èªè¨­å®šã«å¿œã˜ã¦è‡ªå‹•çš„ã«è¨€èªã‚’åˆ‡ã‚Šæ›¿ãˆ

**è¿½åŠ ãƒ•ã‚¡ã‚¤ãƒ«**:

- `src/i18n/index.ts` - i18nè¨­å®šã¨åˆæœŸåŒ–
- `src/i18n/locales/en.json` - è‹±èªç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«
- `src/i18n/locales/ja.json` - æ—¥æœ¬èªç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«

**å¯¾å¿œç”»é¢**:

- ãƒ›ãƒ¼ãƒ ç”»é¢ï¼ˆHomeScreenï¼‰
- å˜èªå¸³ç”»é¢ï¼ˆWordbookScreenï¼‰
- é€²æ—ç”»é¢ï¼ˆProgressScreenï¼‰
- è¨­å®šç”»é¢ï¼ˆSettingsScreenï¼‰
- ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ç”»é¢ï¼ˆLicenseScreenï¼‰
- WordPopupãƒ¢ãƒ¼ãƒ€ãƒ«
- ãã®ä»–å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

**ä½¿ç”¨æ–¹æ³•**:

```typescript
import { useTranslation } from 'react-i18next';

const { t } = useTranslation();
// ä½¿ç”¨ä¾‹: t('home.title'), t('settings.language')
```

---

### 6. ATProtocol OAuthèªè¨¼ã®æ­£å¼å®Ÿè£…

**ç›®çš„**: `react-native-mmkv`ãªã©ã®ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ä¾å­˜ã«ã‚ˆã‚‹ã‚¨ãƒ©ãƒ¼ã‚’è§£æ¶ˆã—ã€å®‰å®šã—ãŸOAuthèªè¨¼ã‚’æä¾›ã€‚

**ä¿®æ­£å†…å®¹**:
- `@atproto/oauth-client`ï¼ˆã‚³ã‚¢ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼‰ã¸ã®ç§»è¡Œã¨ã‚«ã‚¹ã‚¿ãƒ ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã®å®Ÿè£…
- `react-native-mmkv`ã¸ã®ä¾å­˜ã‚’å®Œå…¨ã«æ’é™¤ã—ã€`AsyncStorage`ãƒ™ãƒ¼ã‚¹ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã‚’å°å…¥
- `expo-crypto`ã¨`elliptic`ã‚’çµ„ã¿åˆã‚ã›ãŸDPoPï¼ˆDemonstrating Proof-of-Possessionï¼‰å¯¾å¿œã®æš—å·åŒ–å®Ÿè£…ï¼ˆ`JoseKey`ï¼‰
- `WebBrowser.openAuthSessionAsync`ã‚’ä½¿ç”¨ã—ãŸã€ã‚ˆã‚Šå®‰å®šã—ãŸèªè¨¼ãƒ•ãƒ­ãƒ¼ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶èµ·å‹•ã‹ã‚‰ã‚¢ãƒ—ãƒªå¾©æ—§ã¾ã§ã‚’ä¸€æœ¬åŒ–ï¼‰
- å†—é•·ãªãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯ãƒªã‚¹ãƒŠãƒ¼ã®å‰Šé™¤ï¼ˆã‚³ã‚¢ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨WebBrowserã®çµ„ã¿åˆã‚ã›ã§ç°¡ç´ åŒ–ï¼‰
- ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã®åˆ·æ–°ï¼š`authStore.test.ts`ãŠã‚ˆã³`oauth-client`ã®åˆæœŸåŒ–ãƒ†ã‚¹ãƒˆãŒæ­£å¸¸ã«é€šé

---

### 7. ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã®æ§‹æˆå¤‰æ›´ï¼ˆOAuthä¸€æœ¬åŒ–ï¼‰

**ç›®çš„**: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ§˜ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã«åŸºã¥ãã€App Passwordèªè¨¼ã‚’ä¸€æ—¦å»ƒæ­¢ã—ã€ã‚ˆã‚Šã‚»ã‚­ãƒ¥ã‚¢ãªOAuthèªè¨¼ã®ã¿ã®ã‚·ãƒ³ãƒ—ãƒ«ãªæ§‹æˆã«æ”¹å–„ã€‚

**ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«**: `src/screens/LoginScreen.tsx`

**ä¿®æ­£å†…å®¹**:
- **App Passwordèªè¨¼ãƒ•ã‚©ãƒ¼ãƒ ã®å‰Šé™¤**: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›æ¬„ã€ãƒ˜ãƒ«ãƒ—ãƒªãƒ³ã‚¯ã€ãŠã‚ˆã³App Passwordç”¨ã®ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã‚’å‰Šé™¤ã€‚
- **UIã®ç°¡ç´ åŒ–**: ãƒãƒ³ãƒ‰ãƒ«åå…¥åŠ›ã¨ã€ŒBlueskyã§ãƒ­ã‚°ã‚¤ãƒ³ã€ãƒœã‚¿ãƒ³ã®ã¿ã®ç›´æ„Ÿçš„ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«å¤‰æ›´ã€‚
- **OAuthãƒœã‚¿ãƒ³ã®ãƒ¡ã‚¤ãƒ³åŒ–**: ç”»é¢ä¸­å¤®ã«é…ç½®ã—ã€ãƒ—ãƒ©ã‚¤ãƒãƒªãƒœã‚¿ãƒ³ã¨ã—ã¦è¨­å®šã€‚

---

### 8. OAuthèªè¨¼ã‚¨ãƒ©ãƒ¼ã€ŒNot implemented yetã€ã®è§£æ¶ˆ

**å ±å‘Šå†…å®¹**: å®Ÿæ©Ÿï¼ˆTestFlightï¼‰ã«ã¦OAuthèªè¨¼ã‚’è©¦ã¿ã‚‹ã¨ã€ŒNot implemented yetã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹

**åŸå› **:
- æš—å·åŒ–ã®å®Ÿè£…ï¼ˆ`crypto-implementation.ts`ï¼‰ã«ãŠã„ã¦ã€ä¸€éƒ¨ã®ãƒã‚¤ãƒŠãƒªæ“ä½œã«ç’°å¢ƒä¾å­˜ï¼ˆ`atob`ç­‰ï¼‰ã®é–¢æ•°ã‚’ä½¿ç”¨ã—ã¦ãŠã‚Šã€Expo Go/Nativeç’°å¢ƒã§æœªå®Ÿè£…ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ãŸã€‚
- ãƒ€ã‚¤ã‚¸ã‚§ã‚¹ãƒˆï¼ˆãƒãƒƒã‚·ãƒ¥ï¼‰è¨ˆç®—æ™‚ã«ã€Uint8Arrayã§ã¯ãªãBase64æ–‡å­—åˆ—ã‚’å‡¦ç†ã—ã¦ã„ãŸãŸã‚è¨ˆç®—çµæœãŒä¸æ­£ã«ãªã£ã¦ã„ãŸã€‚
- `@atproto/oauth-client` ãŒæœŸå¾…ã™ã‚‹ `RuntimeImplementation` ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰åãŒ Core ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ä¹–é›¢ã—ã¦ã„ãŸã€‚

**ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/services/auth/crypto-implementation.ts`
- `src/services/auth/JoseKey.ts`

**ä¿®æ­£å†…å®¹**:
- **ãƒã‚¤ãƒŠãƒªå‡¦ç†ã®ä¿®æ­£**: `expo-crypto` ã® `digest` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç›´æ¥ Uint8Array ã§å‘¼ã³å‡ºã™ã‚ˆã†ã«ä¿®æ­£ã—ã€Base64/æ–‡å­—åˆ—å¤‰æ›ã«ã‚ˆã‚‹ãƒã‚°ã¨æœªå®Ÿè£…ã‚¨ãƒ©ãƒ¼ã‚’è§£æ¶ˆã€‚
- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®é©åˆ**: ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©ã«åˆã‚ã›ã¦ `createKey` ç­‰ã®ãƒ¡ã‚½ãƒƒãƒ‰åã‚’ä¿®æ­£ã€‚
- **éµç®¡ç†ã®å¼·åŒ–**: `JoseKey` ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’æ‹¡å¼µã—ã€JWKï¼ˆJSON Web Keyï¼‰å½¢å¼ã‹ã‚‰ã®å¾©å…ƒã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ã§ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³å†é–‹æ™‚ã®å®‰å®šæ€§ã‚’å‘ä¸Šã€‚

---

### 9. OAuthèªè¨¼å¾Œã€ŒBad token scopeã€ãŠã‚ˆã³ã€ŒAuthentication Requiredã€ã‚¨ãƒ©ãƒ¼ã®è§£æ¶ˆ

**å ±å‘Šå†…å®¹**: OAuthèªè¨¼è‡ªä½“ã¯æˆåŠŸã™ã‚‹ãŒã€èªè¨¼å¾Œã®APIå‘¼ã³å‡ºã—ã§ã€ŒBad token scopeã€ã‚„ã€ŒAuthentication Requiredã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹

**åŸå› **:

1. **PDSã¨Authorization Serverã®æ··åŒ**:
   - `bsky.social`ã¯Authorization Serverï¼ˆEntrywayï¼‰ã§ã‚ã‚Šã€PDSï¼ˆProtected Resourceï¼‰ã§ã¯ãªã„
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å®Ÿéš›ã®PDSã¯åˆ¥ã®ã‚µãƒ¼ãƒãƒ¼ï¼ˆä¾‹ï¼š`puffball.us-east.host.bsky.network`ï¼‰
   - `customResolver`ã§ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸ`serviceEndpoint`ãŒä¸æ­£ç¢ºã ã£ãŸ

2. **DPoP-boundãƒˆãƒ¼ã‚¯ãƒ³ã¨BskyAgentã®éäº’æ›æ€§**:
   - ATProtocol OAuthã§å–å¾—ã™ã‚‹ãƒˆãƒ¼ã‚¯ãƒ³ã¯DPoP-boundï¼ˆè¨¼æ˜éµã«ç´ã¥ã‘ï¼‰
   - `BskyAgent.resumeSession()`ã¯å¾“æ¥ã®App Passwordå½¢å¼ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æƒ³å®š
   - OAuth sessionã®`fetchHandler`ã‚’ä½¿ç”¨ã—ã¦APIå‘¼ã³å‡ºã—ã‚’è¡Œã†å¿…è¦ãŒã‚ã£ãŸ

**ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/services/auth/oauth-client.ts`
- `src/services/bluesky/auth.ts`

**ä¿®æ­£å†…å®¹**:
- **PLC Directoryã‹ã‚‰ã®å®ŸDIDãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå–å¾—**: `customResolver`ã‚’ä¿®æ­£ã—ã€`https://plc.directory/{did}`ã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ¬å½“ã®PDS URLã‚’å–å¾—
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ä¿®æ­£**: Authorization Serverãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã€Protected Resourceã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å‰Šé™¤
- **`setOAuthSession()`é–¢æ•°ã®å°å…¥**: OAuth sessionã®`fetchHandler`ã‚’ä½¿ç”¨ã—ã¦APIå‘¼ã³å‡ºã—ã‚’è¡Œã†ã‚ˆã†ã«å¤‰æ›´
- **èªè¨¼ãƒ•ãƒ­ãƒ¼ã®ä¿®æ­£**: `startOAuthFlow`ã¨`resumeSession`ã§`setOAuthSession()`ã‚’ä½¿ç”¨

**æˆæœ**: **å®Ÿæ©Ÿã§ã®OAuthãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸã‚’ç¢ºèªï¼**

---

### 10. æŠ•ç¨¿ãƒ•ã‚£ãƒ¼ãƒ‰ã®ç¿»è¨³æ¼ã‚Œä¿®æ­£

**å ±å‘Šå†…å®¹**: è¨­å®šã®è¨€èªã‚’ã€ŒEnglishã€ã«ã—ãŸæ™‚ã€æŠ•ç¨¿ãƒ•ã‚£ãƒ¼ãƒ‰å†…ã®ä»¥ä¸‹ã®æ–‡ç« ãŒè‹±æ–‡ã«ç¿»è¨³ã•ã‚Œã¦ã„ãªã„
- ã€ŒãŸã£ãŸä»Šã€ç­‰ã®æŠ•ç¨¿æ™‚é–“è¡¨ç¤º
- ã€Œé•·æŠ¼ã—ã§å˜èªé¸æŠã€‚ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ã§æ–‡ç« ã‚’é¸æŠ â€»è‹±æ–‡ã®ã¿ã€

**åŸå› **: ã“ã‚Œã‚‰ã®æ–‡å­—åˆ—ãŒãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ãŠã‚Šã€i18nç¿»è¨³ã‚·ã‚¹ãƒ†ãƒ ã‚’çµŒç”±ã—ã¦ã„ãªã‹ã£ãŸã€‚

**ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/locales/en/common.json`
- `src/locales/ja/common.json`
- `src/locales/en/home.json`
- `src/locales/ja/home.json`
- `src/services/bluesky/feed.ts`
- `src/components/PostCard.tsx`

**ä¿®æ­£å†…å®¹**:

1. **ç›¸å¯¾æ™‚é–“ã®ç¿»è¨³ã‚­ãƒ¼è¿½åŠ ** (`common.json`):
```json
// en/common.json
"time": {
  "justNow": "Just now",
  "minutesAgo": "{{count}}m ago",
  "hoursAgo": "{{count}}h ago",
  "daysAgo": "{{count}}d ago"
}

// ja/common.json
"time": {
  "justNow": "ãŸã£ãŸä»Š",
  "minutesAgo": "{{count}}åˆ†å‰",
  "hoursAgo": "{{count}}æ™‚é–“å‰",
  "daysAgo": "{{count}}æ—¥å‰"
}
```

2. **é¸æŠãƒ’ãƒ³ãƒˆã®ç¿»è¨³ã‚­ãƒ¼è¿½åŠ ** (`home.json`):
```json
// en/home.json
"selectionHint": "Long press to select word. Double tap to select sentence *English only"

// ja/home.json
"selectionHint": "é•·æŠ¼ã—ã§å˜èªé¸æŠã€‚ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ã§æ–‡ç« ã‚’é¸æŠ â€»è‹±æ–‡ã®ã¿"
```

3. **`formatRelativeTime`é–¢æ•°ã®å›½éš›åŒ–å¯¾å¿œ** (`feed.ts`):
```typescript
export function formatRelativeTime(
  dateString: string,
  t?: TranslationFunction,
  locale: string = 'ja-JP'
): string {
  // ç¿»è¨³é–¢æ•°ã‚’å—ã‘å–ã‚Šã€è¨€èªã«å¿œã˜ãŸç›¸å¯¾æ™‚é–“ã‚’è¿”ã™
  if (diffSeconds < 60) {
    return t('common:time.justNow');
  } else if (diffMinutes < 60) {
    return t('common:time.minutesAgo', { count: diffMinutes });
  }
  // ...
}
```

4. **PostCardã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ›´æ–°** (`PostCard.tsx`):
```typescript
const { t, i18n } = useTranslation(['home', 'common']);

// ç›¸å¯¾æ™‚é–“è¡¨ç¤º
{formatRelativeTime(post.createdAt, t, i18n.language)}

// é¸æŠãƒ’ãƒ³ãƒˆ
{t('home:selectionHint')}
```

---

## ãƒ†ã‚¹ãƒˆç¢ºèªé …ç›®

- [ ] WordPopupãƒ¢ãƒ¼ãƒ€ãƒ«ã®ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ãŒé€ã‘ã¦ã„ãªã„ã“ã¨
- [ ] ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ç”»é¢ã§Yahoo! APIã®åå‰ã¨ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨
- [ ] ã‚¿ãƒ–ãƒãƒ¼ã«ã‚¢ã‚¤ã‚³ãƒ³ã®ã¿è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨
- [ ] ãƒ›ãƒ¼ãƒ ç”»é¢ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¾Œã«TOPã¸æˆ»ã‚‹ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨
- [ ] TOPã¸æˆ»ã‚‹ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—ã§ãƒ•ã‚£ãƒ¼ãƒ‰å…ˆé ­ã«æˆ»ã‚‹ã“ã¨
- [ ] **ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ãŒãƒãƒ³ãƒ‰ãƒ«åã¨OAuthãƒœã‚¿ãƒ³ã®ã¿ã«ãªã£ã¦ã„ã‚‹ã“ã¨**
- [ ] **å®Ÿæ©Ÿã§ã€ŒBlueskyã§ãƒ­ã‚°ã‚¤ãƒ³ã€ã‚’ã‚¿ãƒƒãƒ—ã—ã€æ­£å¸¸ã«èªè¨¼ãƒ–ãƒ©ã‚¦ã‚¶ãŒèµ·å‹•ã™ã‚‹ã“ã¨**
- [ ] **èªè¨¼å®Œäº†å¾Œã€ã‚¢ãƒ—ãƒªã«æ­£å¸¸ã«æˆ»ã‚Šãƒ­ã‚°ã‚¤ãƒ³ãŒã§ãã‚‹ã“ã¨**
- [ ] **è¨­å®šã§è¨€èªã‚’ã€ŒEnglishã€ã«å¤‰æ›´å¾Œã€æŠ•ç¨¿æ™‚é–“ãŒè‹±èªè¡¨ç¤ºï¼ˆ"Just now", "5m ago"ç­‰ï¼‰ã«ãªã‚‹ã“ã¨**
- [ ] **è¨­å®šã§è¨€èªã‚’ã€ŒEnglishã€ã«å¤‰æ›´å¾Œã€é¸æŠãƒ’ãƒ³ãƒˆãŒè‹±èªè¡¨ç¤ºã«ãªã‚‹ã“ã¨**
- [ ] **å¥èª­ç‚¹ã®ãªã„è‹±èªæŠ•ç¨¿ã§å˜èªã®ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ãƒ»é•·æŠ¼ã—ãŒå‹•ä½œã™ã‚‹ã“ã¨**
- [ ] **ã„ã„ã­ãƒœã‚¿ãƒ³ã®éš£ã«BookSearchã‚¢ã‚¤ã‚³ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨**
- [ ] **BookSearchã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨æŠ•ç¨¿å…¨ä½“ã§WordPopupãŒé–‹ãã“ã¨**
- [ ] **è¨­å®šã§è¨€èªã‚’ã€ŒEnglishã€ã«å¤‰æ›´å¾Œã€å˜èªç™»éŒ²æ™‚ã®AlertãŒè‹±èªè¡¨ç¤ºï¼ˆ"Success", "Word added!"ç­‰ï¼‰ã«ãªã‚‹ã“ã¨**

---

### 11. å¥èª­ç‚¹ãªã—ã®è‹±æ–‡é¸æŠå¯¾å¿œ & BookSearchãƒœã‚¿ãƒ³è¿½åŠ 

**å ±å‘Šå†…å®¹**:
- SNSã®æŠ•ç¨¿ã¯ãƒ”ãƒªã‚ªãƒ‰(.)ã‚„å¥èª­ç‚¹(ã€‚)ãŒãªã„å ´åˆãŒå¤šãã€æ–‡ç« é¸æŠãŒã§ããªã„
- ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ã¯ç–²ã‚Œã‚‹ãŸã‚ã€ãƒ¯ãƒ³ã‚¿ãƒƒãƒ—ã§æŠ•ç¨¿å…¨ä½“ã‚’èª¿ã¹ã‚‰ã‚Œã‚‹ãƒœã‚¿ãƒ³ãŒæ¬²ã—ã„

**åŸå› **:
- `PostCard.tsx`ã®è‹±æ–‡åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ã§ã€æœ«å°¾ã«`.!?`ãŒãªã„ã¨è‹±æ–‡ã¨ã—ã¦èªè­˜ã•ã‚Œãªã‹ã£ãŸ
- `splitIntoSentences()`ã¯å¥èª­ç‚¹ãªã—ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’è¿”ã™ãŒã€`isEnglishSentence`ãƒã‚§ãƒƒã‚¯ã§å¼¾ã‹ã‚Œã¦ã„ãŸ

**ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/components/PostCard.tsx`
- `src/locales/en/home.json`
- `src/locales/ja/home.json`

**ä¿®æ­£å†…å®¹**:

1. **å¥èª­ç‚¹ãªã—ã®è‹±æ–‡é¸æŠå¯¾å¿œ** (`PostCard.tsx` 78-83è¡Œç›®):
```typescript
// å¤‰æ›´å‰
const hasEnglish = /[a-zA-Z]/.test(sentence);
const isEnglishSentence = hasEnglish && /[.!?]$/.test(sentence.trim());

// å¤‰æ›´å¾Œ
const hasEnglish = /[a-zA-Z]/.test(sentence);
const hasTerminalPunctuation = /[.!?]$/.test(sentence.trim());
// å¥èª­ç‚¹ãŒãªã„å ´åˆã§ã‚‚ã€å˜ä¸€æ–‡ç« ãªã‚‰è‹±æ–‡ã¨ã—ã¦æ‰±ã†
const isOnlySentence = sentences.length === 1;
const isEnglishSentence = hasEnglish && (hasTerminalPunctuation || isOnlySentence);
```

2. **BookSearchãƒœã‚¿ãƒ³ã®è¿½åŠ ** (`PostCard.tsx`):
```typescript
// ã‚¢ã‚¤ã‚³ãƒ³ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆè¿½åŠ 
import { MessageCircle, Repeat2, Heart, BookSearch } from 'lucide-react-native';

// ãƒãƒ³ãƒ‰ãƒ©ãƒ¼è¿½åŠ 
const handleBookSearchPress = useCallback(() => {
  if (!onSentenceSelect) return;
  const fullText = post.text.trim();
  if (fullText) {
    setSelectedSentence(fullText);
    setSelectedWord(null);
    onSentenceSelect(fullText, post.uri, post.text);
  }
}, [post.uri, post.text, onSentenceSelect]);

// UIã«ãƒœã‚¿ãƒ³è¿½åŠ ï¼ˆã„ã„ã­ãƒœã‚¿ãƒ³ã®éš£ï¼‰
{onSentenceSelect && (
  <Pressable
    style={styles.bookSearchButton}
    onPress={handleBookSearchPress}
    hitSlop={{ top: 8, bottom: 8, left: 8, right: 8 }}
    accessible={true}
    accessibilityLabel={t('home:lookupPost')}
    accessibilityRole="button"
  >
    <BookSearch size={16} color={Colors.textSecondary} />
  </Pressable>
)}

// ã‚¹ã‚¿ã‚¤ãƒ«è¿½åŠ 
bookSearchButton: {
  flexDirection: 'row',
  alignItems: 'center',
  padding: Spacing.xs,
},
```

3. **ç¿»è¨³ã‚­ãƒ¼ã®è¿½åŠ **:
```json
// en/home.json
"lookupPost": "Look up post"

// ja/home.json
"lookupPost": "æŠ•ç¨¿ã‚’èª¿ã¹ã‚‹"
```

**åŠ¹æœ**:
- "oh yeah that would sell" ã®ã‚ˆã†ãªå¥èª­ç‚¹ãªã—ã®æŠ•ç¨¿ã§ã‚‚å˜èªé¸æŠãƒ»æ–‡ç« é¸æŠãŒå¯èƒ½ã«
- BookSearchã‚¢ã‚¤ã‚³ãƒ³ã‚’ãƒ¯ãƒ³ã‚¿ãƒƒãƒ—ã™ã‚‹ã ã‘ã§æŠ•ç¨¿å…¨ä½“ã‚’WordPopupã§èª¿ã¹ã‚‰ã‚Œã‚‹

---

### 12. é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§ã®ä¸è¦ãªã‚¨ãƒ©ãƒ¼ãƒˆãƒ¼ã‚¹ãƒˆéè¡¨ç¤º

**å ±å‘Šå†…å®¹**: å˜èªã®å®šç¾©ãŒè¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸå ´åˆã‚„APIãƒ¬ãƒ¼ãƒˆåˆ¶é™æ™‚ã«ã€ç”»é¢ä¸‹éƒ¨ã«è­¦å‘Šãƒˆãƒ¼ã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹

**åŸå› **: `AppError`ã‚¯ãƒ©ã‚¹ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§ã€é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ï¼ˆ`__DEV__`ï¼‰æ™‚ã«ã™ã¹ã¦ã®ã‚¨ãƒ©ãƒ¼ã‚’`console.error`ã§å‡ºåŠ›ã—ã¦ã„ãŸã€‚ã“ã‚ŒãŒReact Nativeã®ã‚¨ãƒ©ãƒ¼ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã¨ã—ã¦è¡¨ç¤ºã•ã‚Œã¦ã„ãŸã€‚

**ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«**: `src/utils/errors.ts`

**ä¿®æ­£å†…å®¹**:

```typescript
// å¤‰æ›´å‰
if (__DEV__) {
  console.error(`[${this.timestamp}] ${code}: ${message}`, originalError);
}

// å¤‰æ›´å¾Œ
// Skip logging for expected/handled cases that don't need console output
const silentErrors: ErrorCode[] = [
  ErrorCode.WORD_NOT_FOUND, // Normal case: word not in dictionary
  ErrorCode.RATE_LIMIT, // Expected when API limits are hit
  ErrorCode.RATE_LIMIT_EXCEEDED, // Expected when API limits are hit
];
if (__DEV__ && !silentErrors.includes(code)) {
  console.error(`[${this.timestamp}] ${code}: ${message}`, originalError);
}
```

**åŠ¹æœ**:

- è¾æ›¸ã«å˜èªãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆï¼ˆ`WORD_NOT_FOUND`ï¼‰ã®ã‚¨ãƒ©ãƒ¼ãƒˆãƒ¼ã‚¹ãƒˆãŒéè¡¨ç¤ºã«
- APIãƒ¬ãƒ¼ãƒˆåˆ¶é™ã‚¨ãƒ©ãƒ¼ï¼ˆ`RATE_LIMIT`ã€`RATE_LIMIT_EXCEEDED`ï¼‰ã®ãƒˆãƒ¼ã‚¹ãƒˆãŒéè¡¨ç¤ºã«
- ã“ã‚Œã‚‰ã¯æ­£å¸¸ãªå‹•ä½œã®ä¸€éƒ¨ã§ã‚ã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è­¦å‘Šã¨ã—ã¦è¡¨ç¤ºã™ã‚‹å¿…è¦ãŒãªã„ãŸã‚

---

### 13. ã‚·ã‚§ã‚¢æ©Ÿèƒ½ã®çµ±åˆã¨ç”»åƒä»˜ãBlueskyæŠ•ç¨¿

**å ±å‘Šå†…å®¹**: é€²æ—ç”»é¢ã®ã€ŒBlueskyã«æŠ•ç¨¿ã€ã¨ã€Œç”»åƒã‚’ã‚·ã‚§ã‚¢ã€ãƒœã‚¿ãƒ³ã‚’çµ±åˆã—ã€ãƒ†ã‚­ã‚¹ãƒˆã¨ç”»åƒã‚’ä¸€ç·’ã«ã‚·ã‚§ã‚¢ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã»ã—ã„

**ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/screens/ProgressScreen.tsx`
- `src/services/learning/session.ts`
- `src/locales/ja/progress.json`
- `src/locales/en/progress.json`

**å®Ÿè£…å†…å®¹**:

1. **ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ã®çµ±åˆ** (`ProgressScreen.tsx`):
   - ã€ŒBlueskyã«æŠ•ç¨¿ã€ã¨ã€Œç”»åƒã‚’ã‚·ã‚§ã‚¢ã€ã®2ã¤ã®ãƒœã‚¿ãƒ³ã‚’ã€Œã‚·ã‚§ã‚¢ã™ã‚‹ã€1ã¤ã«çµ±åˆ
   - ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ã®å ´åˆã¯Blueskyã«ç”»åƒä»˜ãæŠ•ç¨¿ã€æœªãƒ­ã‚°ã‚¤ãƒ³ã®å ´åˆã¯ç”»åƒã‚·ã‚§ã‚¢

2. **ç”»åƒä»˜ãBlueskyæŠ•ç¨¿æ©Ÿèƒ½** (`session.ts`):
```typescript
// ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰é–¢æ•°
export async function uploadImageToBluesky(
  agent: BskyAgent,
  base64Data: string,
  mimeType: string = 'image/jpeg'
): Promise<{ blob: { $type: string; ref: { $link: string }; mimeType: string; size: number } }> {
  const uint8Array = new Uint8Array(Buffer.from(base64Data, 'base64'));
  const uploadResponse = await agent.uploadBlob(uint8Array, {
    encoding: mimeType,
  });
  // ...
}

// ç”»åƒä»˜ãæŠ•ç¨¿é–¢æ•°
export async function shareToBlueskyWithImage(
  agent: BskyAgent,
  wordsLearned: number,
  imageBase64: string,
  achievement?: string
): Promise<string> {
  const text = generateSessionPostText(wordsLearned, achievement);
  const facets = generateFacets(text);
  const uploadedImage = await uploadImageToBluesky(agent, imageBase64);
  // facetsã¨embed.imagesã‚’å«ã‚ã¦æŠ•ç¨¿
}
```

3. **ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã®ãƒªãƒƒãƒãƒ†ã‚­ã‚¹ãƒˆå¯¾å¿œ** (`session.ts`):
```typescript
export function generateFacets(text: string): Array<{
  index: { byteStart: number; byteEnd: number };
  features: Array<{ $type: string; tag: string }>;
}> {
  // ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã‚’æ¤œå‡ºã—ã¦ãƒã‚¤ãƒˆä½ç½®ã‚’è¨ˆç®—
  // Blueskyã§#è‹±èªå­¦ç¿’ã€#ãã‚‚ãŸã‚“ãŒã‚¯ãƒªãƒƒã‚¯å¯èƒ½ãªãƒªãƒ³ã‚¯ã«
}
```

4. **OAuthèªè¨¼å¯¾å¿œ**:
   - `agent.session?.did`ï¼ˆApp Passwordï¼‰ã¨`(agent as any).sessionManager?.did`ï¼ˆOAuthï¼‰ã®ä¸¡æ–¹ã‚’ã‚µãƒãƒ¼ãƒˆ
   - DPoP-boundãƒˆãƒ¼ã‚¯ãƒ³ã§ã®APIå‘¼ã³å‡ºã—ã«å¯¾å¿œ

5. **ç”»åƒã‚­ãƒ£ãƒ—ãƒãƒ£ã®ä¿®æ­£**:
   - React Nativeã®`blob.arrayBuffer()`éå¯¾å¿œå•é¡Œã‚’`Buffer.from(base64Data, 'base64')`ã§è§£æ±º
   - PNGâ†’JPEGå¤‰æ›ã§é€éå•é¡Œã‚’å›é¿
   - ViewShotã®æ§‹é€ ã‚’ä¿®æ­£ã—ã€å››éš…ã®ç™½è‰²è¡¨ç¤ºã‚’è§£æ¶ˆ

**ä¿®æ­£ã•ã‚ŒãŸã‚¹ã‚¿ã‚¤ãƒ«** (`ProgressScreen.tsx`):
```typescript
shareCardPreviewWrapper: {
  marginBottom: Spacing.lg,
  borderRadius: BorderRadius.lg,
  overflow: 'hidden',
},
shareCard: {
  backgroundColor: Colors.primary,
  padding: Spacing.xl,
  alignItems: 'center',
  // borderRadiusãªã— - ViewShotã¯çŸ©å½¢ã§ã‚­ãƒ£ãƒ—ãƒãƒ£
  // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯shareCardPreviewWrapperã®overflow:hiddenã§è§’ä¸¸è¡¨ç¤º
},
```

**ç¿»è¨³ã‚­ãƒ¼ã®è¿½åŠ **:
```json
// ja/progress.json
"button": "ã‚·ã‚§ã‚¢ã™ã‚‹"

// en/progress.json
"button": "Share"
```

**åŠ¹æœ**:
- ãƒ¯ãƒ³ã‚¿ãƒƒãƒ—ã§ãƒ†ã‚­ã‚¹ãƒˆã¨ç”»åƒã‚’ä¸€ç·’ã«Blueskyã«æŠ•ç¨¿å¯èƒ½
- ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ãŒã‚¯ãƒªãƒƒã‚¯å¯èƒ½ãªãƒªãƒ³ã‚¯ã¨ã—ã¦è¡¨ç¤º
- ç”»åƒã®å››éš…ãŒç™½ããªã‚‰ãšã€ãã‚Œã„ãªçŸ©å½¢ç”»åƒã¨ã—ã¦æŠ•ç¨¿

---

### 14. å˜èªç™»éŒ²ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã®ç¿»è¨³å¯¾å¿œ

**å ±å‘Šå†…å®¹**: è¨­å®šã®è¨€èªé¸æŠã§Englishã‚’é¸æŠã—ãŸéš›ã€å˜èªç™»éŒ²ã—ãŸæ™‚ã«è¡¨ç¤ºã•ã‚Œã‚‹ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ç”»é¢ï¼ˆAlertï¼‰ãŒç¿»è¨³ã•ã‚Œã¦ã„ãªã„

**åŸå› **: `WordPopup.tsx`ã§Alertãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸæ—¥æœ¬èªæ–‡å­—åˆ—ã‚’ä½¿ç”¨ã—ã¦ãŠã‚Šã€i18nç¿»è¨³ã‚·ã‚¹ãƒ†ãƒ ã‚’çµŒç”±ã—ã¦ã„ãªã‹ã£ãŸã€‚

**ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«**: `src/components/WordPopup.tsx`

**ä¿®æ­£å†…å®¹**:

1. **`useTranslation`ãƒ•ãƒƒã‚¯ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆè¿½åŠ **:
```typescript
import { useTranslation } from 'react-i18next';
```

2. **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§ãƒ•ãƒƒã‚¯ã‚’ä½¿ç”¨**:
```typescript
const { t } = useTranslation('wordPopup');
```

3. **ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸAlertæ–‡å­—åˆ—ã‚’ç¿»è¨³ã‚­ãƒ¼ã«ç½®æ›**:
```typescript
// å¤‰æ›´å‰
Alert.alert('æƒ…å ±', 'ç™»éŒ²ã™ã‚‹å˜èªãŒã‚ã‚Šã¾ã›ã‚“');
Alert.alert('æˆåŠŸ', 'å˜èªã‚’è¿½åŠ ã—ã¾ã—ãŸï¼');
Alert.alert('ã‚¨ãƒ©ãƒ¼', 'å˜èªã®è¿½åŠ ã«å¤±æ•—ã—ã¾ã—ãŸ');

// å¤‰æ›´å¾Œ
Alert.alert(t('alerts.info'), t('alerts.noWordsToRegister'));
Alert.alert(t('alerts.success'), t('alerts.wordAdded'));
Alert.alert(t('alerts.error'), t('alerts.addFailed'));
```

**ç¿»è¨³ã‚­ãƒ¼ï¼ˆæ—¢å­˜ï¼‰**:
```json
// en/wordPopup.json
"alerts": {
  "info": "Info",
  "success": "Success",
  "error": "Error",
  "noWordsToRegister": "No words to register",
  "wordsAdded": "Added {{count}} words",
  "wordsFailed": "({{count}} failed)",
  "wordAdded": "Word added!",
  "allWordsFailed": "Failed to add all words",
  "addFailed": "Failed to add word"
}

// ja/wordPopup.json
"alerts": {
  "info": "æƒ…å ±",
  "success": "æˆåŠŸ",
  "error": "ã‚¨ãƒ©ãƒ¼",
  "noWordsToRegister": "ç™»éŒ²ã™ã‚‹å˜èªãŒã‚ã‚Šã¾ã›ã‚“",
  "wordsAdded": "{{count}}å€‹ã®å˜èªã‚’è¿½åŠ ã—ã¾ã—ãŸ",
  "wordsFailed": "({{count}}å€‹ã¯å¤±æ•—)",
  "wordAdded": "å˜èªã‚’è¿½åŠ ã—ã¾ã—ãŸï¼",
  "allWordsFailed": "ã™ã¹ã¦ã®å˜èªã®è¿½åŠ ã«å¤±æ•—ã—ã¾ã—ãŸ",
  "addFailed": "å˜èªã®è¿½åŠ ã«å¤±æ•—ã—ã¾ã—ãŸ"
}
```

**åŠ¹æœ**:
- è¨­å®šã§ã€ŒEnglishã€ã‚’é¸æŠã™ã‚‹ã¨ã€å˜èªç™»éŒ²æ™‚ã®AlertãŒè‹±èªã§è¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆä¾‹: "Success" / "Word added!"ï¼‰
- è¨­å®šã§ã€Œæ—¥æœ¬èªã€ã‚’é¸æŠã™ã‚‹ã¨ã€å¾“æ¥é€šã‚Šæ—¥æœ¬èªã§è¡¨ç¤ºã•ã‚Œã‚‹

---

### 15. æ“ä½œã®ãƒ’ãƒ³ãƒˆç”»é¢ã®è¿½åŠ 

**ç›®çš„**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ãƒ—ãƒªã®ä½¿ã„æ–¹ã‚’ç¢ºèªã§ãã‚‹ãƒ˜ãƒ«ãƒ—ç”»é¢ã‚’æä¾›

**å®Ÿè£…å†…å®¹**:

1. **ãƒ›ãƒ¼ãƒ ç”»é¢ã®ãƒ˜ãƒƒãƒ€ãƒ¼ã‚¢ã‚¤ã‚³ãƒ³å¤‰æ›´** (`HomeScreen.tsx`):
   - `RefreshCw`ï¼ˆæ›´æ–°ï¼‰ã‚¢ã‚¤ã‚³ãƒ³ã‚’`Lightbulb`ï¼ˆé›»çƒï¼‰ã‚¢ã‚¤ã‚³ãƒ³ã«å¤‰æ›´
   - ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨ã€Œæ“ä½œã®ãƒ’ãƒ³ãƒˆã€ç”»é¢ã¸é·ç§»

2. **Tipsç”»é¢ã®æ–°è¦ä½œæˆ** (`TipsScreen.tsx`):
```typescript
// 3ã¤ã®ãƒ’ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ã‚’è¡¨ç¤º
<TipCard
  icon={<Hand size={24} color={Colors.primary} />}
  title={t('wordSelection.title')}
  description={t('wordSelection.description')}
/>
<TipCard
  icon={<BookSearch size={24} color={Colors.primary} />}
  title={t('bookSearch.title')}
  description={t('bookSearch.description')}
/>
<TipCard
  icon={<Share2 size={24} color={Colors.primary} />}
  title={t('share.title')}
  description={t('share.description')}
/>
```

3. **è¨­å®šç”»é¢ã¸ã®ã€Œæ“ä½œã®ãƒ’ãƒ³ãƒˆã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ ** (`SettingsScreen.tsx`):
   - ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ä¸‹ã«ã€Œãƒ˜ãƒ«ãƒ—ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ 
   - ã€Œæ“ä½œã®ãƒ’ãƒ³ãƒˆã€é …ç›®ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨Tipsç”»é¢ã¸é·ç§»

4. **ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ ** (`AppNavigator.tsx`):
```typescript
export type RootStackParamList = {
  // ...æ—¢å­˜ã®ãƒ«ãƒ¼ãƒˆ
  Tips: undefined;  // è¿½åŠ 
};

<Stack.Screen
  name="Tips"
  component={TipsScreen}
  options={{
    headerShown: true,
    headerTitle: t('headers.tips'),
    // ...
  }}
/>
```

**è¿½åŠ ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/screens/TipsScreen.tsx` - æ“ä½œã®ãƒ’ãƒ³ãƒˆç”»é¢
- `src/locales/ja/tips.json` - æ—¥æœ¬èªç¿»è¨³
- `src/locales/en/tips.json` - è‹±èªç¿»è¨³

**ç¿»è¨³å†…å®¹**:
```json
// ja/tips.json
{
  "header": "æ“ä½œã®ãƒ’ãƒ³ãƒˆ",
  "wordSelection": {
    "title": "å˜èªé¸æŠ",
    "description": "è‹±å˜èªã‚’é•·æŠ¼ã—ã™ã‚‹ã¨ã€ãã®å˜èªã‚’é¸æŠã—ã¦å˜èªå¸³ã«è¿½åŠ ã§ãã¾ã™ã€‚"
  },
  "bookSearch": {
    "title": "æŠ•ç¨¿ã‚’èª¿ã¹ã‚‹",
    "description": "æŠ•ç¨¿ã®ä¸‹ã«ã‚ã‚‹æœ¬ã®ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆBookSearchï¼‰ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨ã€æŠ•ç¨¿å…¨ä½“ã‚’é¸æŠã—ã¦ç¿»è¨³ã‚„æ„å‘³ã‚’èª¿ã¹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚"
  },
  "share": {
    "title": "ã‚·ã‚§ã‚¢æ©Ÿèƒ½",
    "description": "å˜èªã‚’é¸æŠã—ãŸå¾Œã€ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã®ã€Œã‚·ã‚§ã‚¢ã€ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨ã€ç”»åƒä»˜ãã§Blueskyã«æŠ•ç¨¿ã‚’ã‚·ã‚§ã‚¢ã§ãã¾ã™ã€‚å­¦ç¿’ã®è¨˜éŒ²ã‚’å‹é”ã¨å…±æœ‰ã—ã¾ã—ã‚‡ã†ã€‚"
  }
}

// en/tips.json
{
  "header": "Tips",
  "wordSelection": {
    "title": "Word Selection",
    "description": "Long press on an English word to select it and add it to your vocabulary."
  },
  "bookSearch": {
    "title": "Look Up Post",
    "description": "Tap the book icon (BookSearch) below a post to select the entire post for translation or looking up meanings."
  },
  "share": {
    "title": "Share Feature",
    "description": "After selecting a word, tap the 'Share' button in the popup to share the post to Bluesky with an image. Share your learning progress with friends."
  }
}
```

**è¨­å®šç”»é¢ã®ç¿»è¨³è¿½åŠ **:
```json
// ja/settings.json
"sections": {
  "tips": "ãƒ˜ãƒ«ãƒ—",
  // ...
},
"tips": {
  "title": "æ“ä½œã®ãƒ’ãƒ³ãƒˆ",
  "subtitle": "ã‚¢ãƒ—ãƒªã®ä½¿ã„æ–¹ã‚’ç¢ºèªã™ã‚‹"
}

// en/settings.json
"sections": {
  "tips": "Help",
  // ...
},
"tips": {
  "title": "Usage Tips",
  "subtitle": "Learn how to use the app"
}
```

**åŠ¹æœ**:
- ãƒ›ãƒ¼ãƒ ç”»é¢ã®ãƒ˜ãƒƒãƒ€ãƒ¼ã®é›»çƒã‚¢ã‚¤ã‚³ãƒ³ã‹ã‚‰æ“ä½œã®ãƒ’ãƒ³ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
- è¨­å®šç”»é¢ã®ã€Œãƒ˜ãƒ«ãƒ—ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‹ã‚‰ã‚‚æ“ä½œã®ãƒ’ãƒ³ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
- å˜èªé¸æŠã€BookSearchã‚¢ã‚¤ã‚³ãƒ³ã€ã‚·ã‚§ã‚¢æ©Ÿèƒ½ã®3ã¤ã®ä½¿ã„æ–¹ã‚’èª¬æ˜

---

### 16. æŠ•ç¨¿ã‚«ãƒ¼ãƒ‰ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå¤‰æ›´ï¼ˆBlueskyé¢¨ï¼‰

**ç›®çš„**: Blueskyã®æŠ•ç¨¿ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’å‚è€ƒã«ã€æŠ•ç¨¿æ–‡ãŒã‚¢ãƒã‚¿ãƒ¼ã®å³å´ã¸é…ç½®ã•ã‚Œã‚‹ã‚ˆã†å¤‰æ›´

**ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«**: `src/components/PostCard.tsx`

**ä¿®æ­£å†…å®¹**:

1. **æŠ•ç¨¿å†…ãƒ’ãƒ³ãƒˆæ–‡ã®å‰Šé™¤**:
   - å„æŠ•ç¨¿ã‚«ãƒ¼ãƒ‰ã®ä¸‹éƒ¨ã«è¡¨ç¤ºã•ã‚Œã¦ã„ãŸã€Œé•·æŠ¼ã—ã§å˜èªé¸æŠã€‚ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ã§æ–‡ç« ã‚’é¸æŠ â€»è‹±æ–‡ã®ã¿ã€ã®ãƒ’ãƒ³ãƒˆæ–‡ã‚’å‰Šé™¤
   - æ“ä½œã®ãƒ’ãƒ³ãƒˆã¯å°‚ç”¨ã®Tipsç”»é¢ã§ç¢ºèªã§ãã‚‹ãŸã‚ã€æŠ•ç¨¿ã‚«ãƒ¼ãƒ‰å†…ã§ã®è¡¨ç¤ºã¯ä¸è¦ã¨åˆ¤æ–­

2. **æ¨ªä¸¦ã³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®æ¡ç”¨**:
   - ã‚¢ãƒã‚¿ãƒ¼ã‚’å·¦å´ã«å›ºå®šã—ã€å³å´ã¸è‘—è€…æƒ…å ±ãƒ»æŠ•ç¨¿æ–‡ãƒ»ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’é…ç½®
   - Blueskyã®æŠ•ç¨¿è¡¨ç¤ºã¨åŒæ§˜ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¸å¤‰æ›´

3. **ã‚¹ã‚¿ã‚¤ãƒ«å¤‰æ›´**:

```typescript
// æ–°ã—ã„ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ§‹é€ 
postLayout: {
  flexDirection: 'row',
  alignItems: 'flex-start',
},
avatar: {
  width: 42,        // 48 ã‹ã‚‰ 42 ã«ç¸®å°
  height: 42,
  borderRadius: 21,
  backgroundColor: Colors.skeleton,
  marginRight: Spacing.md,
},
contentColumn: {
  flex: 1,
},
authorRow: {
  flexDirection: 'row',
  alignItems: 'center',
  marginBottom: Spacing.sm,  // Spacing.md ã‹ã‚‰ Spacing.sm ã«å¤‰æ›´
},
metricsRow: {
  flexDirection: 'row',
  paddingTop: Spacing.sm,
  gap: Spacing.xl,
  // borderTopWidth ã¨ borderTopColor ã‚’å‰Šé™¤
},
```

4. **JSXæ§‹é€ ã®å¤‰æ›´**:

```typescript
<Pressable style={styles.container}>
  <View style={styles.postLayout}>
    {/* Avatar column - å·¦å´å›ºå®š */}
    <Image style={styles.avatar} />

    {/* Content column - å³å´ã«å±•é–‹ */}
    <View style={styles.contentColumn}>
      <View style={styles.authorRow}>...</View>
      <View style={styles.content}>...</View>
      <View style={styles.metricsRow}>...</View>
    </View>
  </View>
</Pressable>
```

**åŠ¹æœ**:

- Blueskyã®æŠ•ç¨¿è¡¨ç¤ºã¨åŒæ§˜ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹æ…£ã‚ŒãŸå½¢å¼ã‚’æ¡ç”¨
- ã‚¢ãƒã‚¿ãƒ¼ãŒå·¦å´ã«å›ºå®šã•ã‚Œã€æŠ•ç¨¿å†…å®¹ãŒå³å´ã¸é…ç½®ã•ã‚Œã‚‹ã“ã¨ã§è¦–èªæ€§ãŒå‘ä¸Š
- ãƒ’ãƒ³ãƒˆæ–‡ã®å‰Šé™¤ã«ã‚ˆã‚Šã€å„æŠ•ç¨¿ã‚«ãƒ¼ãƒ‰ãŒã‚ˆã‚Šã‚³ãƒ³ãƒ‘ã‚¯ãƒˆãªè¡¨ç¤ºã¸

---

### 17. ã„ã„ã­æ©Ÿèƒ½ã®å®Ÿè£…

**ç›®çš„**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæŠ•ç¨¿ã«ã€Œã„ã„ã­ã€ã‚’ä»˜ã‘ãŸã‚Šå–ã‚Šæ¶ˆã—ãŸã‚Šã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹

**ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/services/bluesky/feed.ts`
- `src/types/bluesky.ts`
- `src/components/PostCard.tsx`
- `src/screens/HomeScreen.tsx`
- `src/screens/ThreadScreen.tsx`
- `src/locales/ja/home.json`
- `src/locales/en/home.json`

**å®Ÿè£…å†…å®¹**:

1. **APIé–¢æ•°ã®è¿½åŠ ** (`feed.ts`):
```typescript
// ã„ã„ã­ã‚’ä»˜ã‘ã‚‹
export async function likePost(uri: string, cid: string): Promise<Result<{ uri: string }, AppError>> {
  // ã‚»ãƒƒã‚·ãƒ§ãƒ³ç¢ºèªã€ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãƒã‚§ãƒƒã‚¯
  const agent = getAgent();
  const response = await agent.like(uri, cid);
  return { success: true, data: { uri: response.uri } };
}

// ã„ã„ã­ã‚’å–ã‚Šæ¶ˆã™
export async function unlikePost(likeUri: string): Promise<Result<boolean, AppError>> {
  // ã‚»ãƒƒã‚·ãƒ§ãƒ³ç¢ºèªã€ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãƒã‚§ãƒƒã‚¯
  const agent = getAgent();
  await agent.deleteLike(likeUri);
  return { success: true, data: true };
}
```

2. **å‹å®šç¾©ã®æ›´æ–°** (`bluesky.ts`):
```typescript
// PostViewerå‹ã‚’è¿½åŠ 
export interface PostViewer {
  like?: string; // ã„ã„ã­ãƒ¬ã‚³ãƒ¼ãƒ‰ã®URIï¼ˆã„ã„ã­æ¸ˆã¿ã®å ´åˆï¼‰
  repost?: string; // ãƒªãƒã‚¹ãƒˆãƒ¬ã‚³ãƒ¼ãƒ‰ã®URIï¼ˆãƒªãƒã‚¹ãƒˆæ¸ˆã¿ã®å ´åˆï¼‰
}

// TimelinePostã«cidã¨viewerã‚’è¿½åŠ 
export interface TimelinePost {
  uri: string;
  cid: string;  // è¿½åŠ 
  text: string;
  author: { ... };
  createdAt: string;
  likeCount?: number;
  repostCount?: number;
  replyCount?: number;
  embed?: PostEmbed;
  viewer?: PostViewer;  // è¿½åŠ 
}
```

3. **PostCardã®ã„ã„ã­UI** (`PostCard.tsx`):
```typescript
// ã„ã„ã­çŠ¶æ…‹ã®ç®¡ç†
const [isLiked, setIsLiked] = useState(!!post.viewer?.like);
const [likeCount, setLikeCount] = useState(post.likeCount ?? 0);
const [isLikeLoading, setIsLikeLoading] = useState(false);

// ã„ã„ã­ãƒœã‚¿ãƒ³ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ï¼ˆã‚ªãƒ—ãƒ†ã‚£ãƒŸã‚¹ãƒ†ã‚£ãƒƒã‚¯UIï¼‰
const handleLikePress = useCallback(() => {
  if (isLikeLoading || !onLikePress) return;
  setIsLikeLoading(true);
  const newIsLiked = !isLiked;
  setIsLiked(newIsLiked);
  setLikeCount((prev) => newIsLiked ? prev + 1 : Math.max(0, prev - 1));
  onLikePress(post, newIsLiked);
  setTimeout(() => setIsLikeLoading(false), 500);
}, [isLiked, isLikeLoading, onLikePress, post]);

// ã„ã„ã­ãƒœã‚¿ãƒ³UI
<Pressable
  style={styles.metricItem}
  onPress={handleLikePress}
  disabled={isLikeLoading}
  accessibilityLabel={isLiked ? t('home:unlike') : t('home:like')}
>
  <Heart
    size={14}
    color={isLiked ? Colors.error : Colors.textSecondary}
    fill={isLiked ? Colors.error : 'transparent'}
  />
  <Text style={[styles.metricText, isLiked && styles.likedText]}>
    {likeCount}
  </Text>
</Pressable>
```

4. **HomeScreenã®ã„ã„ã­å‡¦ç†** (`HomeScreen.tsx`):
```typescript
import { likePost, unlikePost } from '../services/bluesky/feed';

const handleLikePress = useCallback(
  async (post: TimelinePost, shouldLike: boolean) => {
    try {
      if (shouldLike) {
        await likePost(post.uri, post.cid);
      } else {
        if (post.viewer?.like) {
          await unlikePost(post.viewer.like);
        }
      }
    } catch (error) {
      if (__DEV__) {
        console.error('Like operation failed:', error);
      }
    }
  },
  []
);

// PostCardã«onLikePressã‚’æ¸¡ã™
<PostCard
  post={post}
  onLikePress={handleLikePress}
  // ...
/>
```

5. **ThreadScreenã®å¯¾å¿œ** (`ThreadScreen.tsx`):
- `toTimelinePost`é–¢æ•°ã«`cid`ã¨`viewer`ã‚’è¿½åŠ 
- ã‚¹ãƒ¬ãƒƒãƒ‰å†…ã®æŠ•ç¨¿ï¼ˆãƒ¡ã‚¤ãƒ³ã€è¦ªã€è¿”ä¿¡ï¼‰ã™ã¹ã¦ã§ã„ã„ã­çŠ¶æ…‹ã‚’è¡¨ç¤º

6. **ç¿»è¨³ã‚­ãƒ¼ã®è¿½åŠ **:
```json
// en/home.json
"like": "Like",
"unlike": "Unlike"

// ja/home.json
"like": "ã„ã„ã­",
"unlike": "ã„ã„ã­ã‚’å–ã‚Šæ¶ˆã™"
```

**åŠ¹æœ**:
- ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã®æŠ•ç¨¿ã§ãƒãƒ¼ãƒˆã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¿ãƒƒãƒ—ã—ã¦ã„ã„ã­ã‚’ä»˜ã‘ã‚‰ã‚Œã‚‹
- ã„ã„ã­æ¸ˆã¿ã®æŠ•ç¨¿ã¯èµ¤ã„ãƒãƒ¼ãƒˆã§è¡¨ç¤º
- ã‚ªãƒ—ãƒ†ã‚£ãƒŸã‚¹ãƒ†ã‚£ãƒƒã‚¯UIæ›´æ–°ã«ã‚ˆã‚Šã€å³åº§ã«UIåæ˜ ï¼ˆAPIå®Œäº†ã‚’å¾…ãŸãªã„ï¼‰
- ã‚¹ãƒ¬ãƒƒãƒ‰ç”»é¢ã§ã‚‚ã„ã„ã­çŠ¶æ…‹ãŒè¡¨ç¤ºã•ã‚Œã‚‹

---

### 18. ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã®App Passwordã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒˆå‰Šé™¤

**ç›®çš„**: OAuthèªè¨¼ã«å®Œå…¨ç§»è¡Œæ¸ˆã¿ã®ãŸã‚ã€App Passwordã«é–¢ã™ã‚‹ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒˆã‚’å‰Šé™¤

**ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«**:

- `src/screens/LoginScreen.tsx`
- `src/locales/ja/login.json`
- `src/locales/en/login.json`

**ä¿®æ­£å†…å®¹**:

1. **Security Noteã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å‰Šé™¤** (`LoginScreen.tsx`):
   - `ğŸ”’ App Passwordã¯èªè¨¼ã«ã®ã¿ä½¿ç”¨ã•ã‚Œã€ä¿å­˜ã•ã‚Œã¾ã›ã‚“ã€‚`ã®è¡¨ç¤ºãƒ–ãƒ­ãƒƒã‚¯ã‚’å‰Šé™¤
   - é–¢é€£ã™ã‚‹ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©ï¼ˆ`securityNote`ã€`securityNoteText`ï¼‰ã‚’å‰Šé™¤

2. **ç¿»è¨³ã‚­ãƒ¼ã®å‰Šé™¤** (`login.json`):

```json
// å‰Šé™¤ã•ã‚ŒãŸç¿»è¨³ã‚­ãƒ¼
"security": {
  "note": "ğŸ”’ App Passwordã¯èªè¨¼ã«ã®ã¿ä½¿ç”¨ã•ã‚Œã€ä¿å­˜ã•ã‚Œã¾ã›ã‚“ã€‚"  // ja
  "note": "ğŸ”’ App Password is used for authentication only and is not stored."  // en
}
```

**åŠ¹æœ**:

- OAuthèªè¨¼ä¸€æœ¬åŒ–ã«ä¼´ã„ã€ä¸è¦ã«ãªã£ãŸApp Passwordé–¢é€£ã®èª¬æ˜æ–‡ã‚’ç”»é¢ã‹ã‚‰é™¤å»
- ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ãŒã‚ˆã‚Šã‚·ãƒ³ãƒ—ãƒ«ã«

---

### 19. ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«UIæ”¹å–„

**ç›®çš„**: ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®è¦–èªæ€§ã¨æ“ä½œæ€§ã‚’å‘ä¸Š

**ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/components/Tutorial/TutorialTooltip.tsx`
- `src/components/PostCard.tsx`
- `src/screens/HomeScreen.tsx`
- `src/hooks/useTutorial.ts`
- `src/locales/ja/tutorial.json`
- `src/locales/en/tutorial.json`

**ä¿®æ­£å†…å®¹**:

1. **ã‚¹ãƒ†ãƒƒãƒ—1ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆå¯¾è±¡ã‚’å˜èªå˜ä½ã«å¤‰æ›´** (`PostCard.tsx`, `HomeScreen.tsx`):
   - å¾“æ¥ã¯ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é ˜åŸŸå…¨ä½“ï¼ˆ`contentColumnRef`ï¼‰ã‚’é’æ ã§å›²ã£ã¦ã„ãŸãŒã€æœ€åˆã®è‹±å˜èª1ã¤ã®ã¿ã‚’å›²ã†ã‚ˆã†ã«å¤‰æ›´
   - ãƒã‚¹ãƒˆã•ã‚ŒãŸ`Text`ã®`measureInWindow`ãŒä¸æ­£ç¢ºãªãŸã‚ã€ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒŠ`View`ã®ä½ç½®ã‹ã‚‰å˜èªå¹…ã‚’æ¨å®šã™ã‚‹æ–¹å¼ã«å¤‰æ›´
   - `firstWordRef`ï¼ˆText refï¼‰ã‚’å»ƒæ­¢ã—ã€`postTextContainerRef`ï¼ˆView refï¼‰+ `firstWordTextRef`ï¼ˆå˜èªãƒ†ã‚­ã‚¹ãƒˆè¿½è·¡ï¼‰ã«ç½®ãæ›ãˆ

2. **ãƒ’ãƒ³ãƒˆã‚¢ã‚¤ã‚³ãƒ³ã®é’æ ã‚µã‚¤ã‚ºä¿®æ­£** (`HomeScreen.tsx`):
   - `measureTips()`ãŒæœªå‘¼ã³å‡ºã—ã ã£ãŸå•é¡Œã‚’ä¿®æ­£ã—ã€`useEffect`ã§ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«é–‹å§‹æ™‚ã«å‘¼ã³å‡ºã™ã‚ˆã†ã«å¤‰æ›´
   - Pressableã®paddingåˆ†ã‚’ã‚ªãƒ•ã‚»ãƒƒãƒˆã—ã€ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆ24x24ï¼‰ã«ãƒ•ã‚£ãƒƒãƒˆã™ã‚‹é’æ ã‚’è¡¨ç¤º
   - ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯åº§æ¨™ã‚‚ã‚¢ã‚¤ã‚³ãƒ³ã‚µã‚¤ã‚ºã«åˆã‚ã›ã¦ä¿®æ­£ï¼ˆ48x48 â†’ 24x24ï¼‰

3. **ã‚«ãƒƒãƒˆã‚¢ã‚¦ãƒˆã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã®å®Ÿè£…** (`TutorialTooltip.tsx`):
   - å…¨ç”»é¢ã‚’è¦†ã†å˜ä¸€ã®æš—ã„ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã‹ã‚‰ã€ãƒã‚¤ãƒ©ã‚¤ãƒˆé ˜åŸŸã«ã€Œç©´ã€ã‚’é–‹ã‘ã‚‹4åˆ†å‰²ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤æ–¹å¼ã«å¤‰æ›´
   - ãƒã‚¤ãƒ©ã‚¤ãƒˆå¯¾è±¡ã®ä¸Šãƒ»ä¸‹ãƒ»å·¦ãƒ»å³ã«4ã¤ã®æš—ã„`View`ã‚’é…ç½®ã—ã€ä¸­å¤®ã¯é€æ˜ï¼ˆå…ƒã®æ˜ã‚‹ã•ï¼‰ã§è¡¨ç¤º
   - è¿½åŠ ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä¸è¦ï¼ˆç´”ç²‹ãªViewé…ç½®ï¼‰
   - `hasValidHighlight`ãŒfalseã®å ´åˆã¯å¾“æ¥é€šã‚Šå…¨ç”»é¢ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯

4. **ã€Œæˆ»ã‚‹ã€ãƒœã‚¿ãƒ³ã®è¿½åŠ ** (`useTutorial.ts`, `TutorialTooltip.tsx`, `HomeScreen.tsx`):
   - `prevStep()`é–¢æ•°ã‚’è¿½åŠ ï¼ˆã‚¹ãƒ†ãƒƒãƒ—1ã‚ˆã‚Šå‰ã«ã¯æˆ»ã‚‰ãªã„ï¼‰
   - ã‚¹ãƒ†ãƒƒãƒ—1ã§ã¯ã€Œã‚¹ã‚­ãƒƒãƒ—ã€ã€ã‚¹ãƒ†ãƒƒãƒ—2ä»¥é™ã§ã¯ã€Œæˆ»ã‚‹ã€ã‚’å·¦å´ã«è¡¨ç¤º
   - ç¿»è¨³ã‚­ãƒ¼`back`ã‚’æ—¥æœ¬èªï¼ˆã€Œæˆ»ã‚‹ã€ï¼‰ãƒ»è‹±èªï¼ˆ"Back"ï¼‰ã§è¿½åŠ 

5. **ã‚¹ãƒ†ãƒƒãƒ—3ã®èª¬æ˜æ–‡æ›´æ–°** (`tutorial.json`):
   - ã€Œç¿»è¨³æ©Ÿèƒ½ã‚’æœ‰åŠ¹åŒ–ã€ã®èª¬æ˜ã«è¾æ›¸ãƒ‡ãƒ¼ã‚¿ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã«ã¤ã„ã¦è¿½è¨˜
   - æ—¥æœ¬èª: ã€Œè¨­å®šç”»é¢ã§DeepL API Keyã‚’ç™»éŒ²ã™ã‚‹ã¨æ—¥æœ¬èªç¿»è¨³ãŒã€è¾æ›¸ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨ã‚ªãƒ•ãƒ©ã‚¤ãƒ³è¾æ›¸ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã€
   - è‹±èª: "Register a DeepL API Key in Settings to enable Japanese translation, and download dictionary data for offline lookup."

**åŠ¹æœ**:
- ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆå¯¾è±¡ãŒæ˜ç¢ºã«ãªã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ“ä½œã™ã¹ãç®‡æ‰€ã‚’ç›´æ„Ÿçš„ã«ç†è§£ã§ãã‚‹
- ã‚«ãƒƒãƒˆã‚¢ã‚¦ãƒˆã«ã‚ˆã‚Šã€æš—ã„ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤è¶Šã—ã§ã‚‚ãƒã‚¤ãƒ©ã‚¤ãƒˆå¯¾è±¡ãŒå…ƒã®æ˜ã‚‹ã•ã§è¦–èªå¯èƒ½
- ã€Œæˆ»ã‚‹ã€ãƒœã‚¿ãƒ³ã§ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®å‰å¾Œã‚’ç¢ºèªã§ãã€è¦‹é€ƒã—ãŸèª¬æ˜ã‚’å†ç¢ºèªå¯èƒ½

---

### 20. åˆå›ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã®è¾æ›¸ã‚¨ãƒ©ãƒ¼ãƒˆãƒ¼ã‚¹ãƒˆéè¡¨ç¤º

**å ±å‘Šå†…å®¹**: ã‚¢ãƒ—ãƒªã«åˆå›ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨ã€Œè¾æ›¸ãƒ‡ãƒ¼ã‚¿ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€ã¨ã‚¨ãƒ©ãƒ¼ãƒˆãƒ¼ã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹

**åŸå› **: `AppError`ã‚¯ãƒ©ã‚¹ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§ã€é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ï¼ˆ`__DEV__`ï¼‰æ™‚ã«`DATABASE_ERROR`ã‚’`console.error`ã§å‡ºåŠ›ã—ã¦ã„ãŸã€‚è¾æ›¸æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯åˆå›èµ·å‹•æ™‚ã®æ­£å¸¸ãªçŠ¶æ…‹ã§ã‚ã‚Šã€ã‚¨ãƒ©ãƒ¼ã¨ã—ã¦è¡¨ç¤ºã™ã¹ãã§ã¯ãªã‹ã£ãŸã€‚

**ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«**: `src/utils/errors.ts`

**ä¿®æ­£å†…å®¹**:

```typescript
// silentErrorsãƒªã‚¹ãƒˆã«DATABASE_ERRORã‚’è¿½åŠ 
const silentErrors: ErrorCode[] = [
  ErrorCode.WORD_NOT_FOUND,
  ErrorCode.DUPLICATE_WORD,
  ErrorCode.RATE_LIMIT,
  ErrorCode.RATE_LIMIT_EXCEEDED,
  ErrorCode.DATABASE_ERROR, // è¿½åŠ : è¾æ›¸æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã®ã‚¨ãƒ©ãƒ¼æŠ‘åˆ¶
];
```

**åŠ¹æœ**:
- è¾æ›¸ãƒ‡ãƒ¼ã‚¿æœªãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ™‚ã®ã‚¨ãƒ©ãƒ¼ãƒˆãƒ¼ã‚¹ãƒˆãŒéè¡¨ç¤ºã«
- PDSå¾©å…ƒæ™‚ã®é‡è¤‡å˜èªã‚¨ãƒ©ãƒ¼ï¼ˆ`DUPLICATE_WORD`ï¼‰ã‚‚åŒæ§˜ã«éè¡¨ç¤ºã«

---

### 21. èªè¨¼ã‚¿ã‚¤ãƒŸãƒ³ã‚°å•é¡Œã®ä¿®æ­£ï¼ˆAuthentication Requiredã‚¨ãƒ©ãƒ¼è§£æ¶ˆï¼‰

**å ±å‘Šå†…å®¹**: åˆå›ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã«ã€ŒAuthentication Requiredã€ã‚¨ãƒ©ãƒ¼ãŒä¸€æ™‚çš„ã«è¡¨ç¤ºã•ã‚Œã‚‹

**åŸå› **: `authStore`ã®`checkAuth()`ãŒãƒˆãƒ¼ã‚¯ãƒ³ã®å­˜åœ¨ã‚’ç¢ºèªã—ãŸæ™‚ç‚¹ã§`isAuthenticated: true`ã‚’è¨­å®šã—ã¦ã„ãŸã€‚ã—ã‹ã—ã€ATProtoã®ã‚»ãƒƒã‚·ãƒ§ãƒ³å¾©å¸°ï¼ˆ`resumeSession()`ï¼‰ã¯ã¾ã å®Œäº†ã—ã¦ãŠã‚‰ãšã€`useBlueskyFeed`ãƒ•ãƒƒã‚¯ãŒ`isAuthenticated`ã®å¤‰æ›´ã‚’æ¤œçŸ¥ã—ã¦ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³å–å¾—ã‚’é–‹å§‹ã™ã‚‹ãŸã‚ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³æœªç¢ºç«‹ã®çŠ¶æ…‹ã§APIå‘¼ã³å‡ºã—ãŒç™ºç”Ÿã—ã€ŒAuthentication Requiredã€ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ãŸã€‚

**ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«**: `src/store/authStore.ts`

**ä¿®æ­£å†…å®¹**:

```typescript
// å¤‰æ›´å‰: checkAuth()ã§isAuthenticatedã‚’trueã«è¨­å®š
checkAuth: async () => {
  if (storedAuth) {
    set({
      isAuthenticated: true,  // â† ã‚»ãƒƒã‚·ãƒ§ãƒ³æœªå¾©å¸°ãªã®ã«true
      isLoading: false,
      user: { handle: storedAuth.handle, did: storedAuth.did },
    });
    return true;
  }
}

// å¤‰æ›´å¾Œ: checkAuth()ã§ã¯isAuthenticatedã‚’falseã®ã¾ã¾ç¶­æŒ
checkAuth: async () => {
  if (storedAuth) {
    // ãƒˆãƒ¼ã‚¯ãƒ³ã¯å­˜åœ¨ã™ã‚‹ãŒã€ã‚»ãƒƒã‚·ãƒ§ãƒ³å¾©å¸°(resumeSession)ãŒå®Œäº†ã™ã‚‹ã¾ã§
    // isAuthenticated ã¯ false ã®ã¾ã¾ã«ã™ã‚‹ã€‚
    set({
      isAuthenticated: false,  // â† resumeSessionå®Œäº†ã¾ã§å¾…æ©Ÿ
      isLoading: true,         // â† ã‚»ãƒƒã‚·ãƒ§ãƒ³å¾©å¸°ä¸­ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã™
      user: { handle: storedAuth.handle, did: storedAuth.did },
    });
    return true;
  }
}
```

**ãƒ•ãƒ­ãƒ¼æ”¹å–„**:
- å¤‰æ›´å‰: `checkAuth`â†’`isAuthenticated=true`â†’ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³å–å¾—é–‹å§‹â†’ã‚»ãƒƒã‚·ãƒ§ãƒ³æœªç¢ºç«‹ã§`Authentication Required`
- å¤‰æ›´å¾Œ: `checkAuth`â†’`isAuthenticated=false`â†’`resumeSession`å®Œäº†â†’`isAuthenticated=true`â†’ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³å–å¾—é–‹å§‹ï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³æœ‰åŠ¹ï¼‰

**åŠ¹æœ**:
- åˆå›ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã®ã€ŒAuthentication Requiredã€ã‚¨ãƒ©ãƒ¼ãŒè§£æ¶ˆ
- `isAuthenticated`ã®æ„å‘³ãŒã€ŒAPIãŒå‘¼ã¹ã‚‹çŠ¶æ…‹ã€ã«çµ±ä¸€ã•ã‚Œã€ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚‚åŒæ§˜ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°å•é¡Œã‚’é˜²æ­¢

---

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. æ–°ã—ã„ãƒ“ãƒ«ãƒ‰ã‚’ä½œæˆï¼ˆ`eas build --profile production --platform ios`ï¼‰
2. TestFlightã«é…ä¿¡
3. ãƒ™ãƒ¼ã‚¿ãƒ†ã‚¹ã‚¿ãƒ¼ã«å†ãƒ†ã‚¹ãƒˆã‚’ä¾é ¼
